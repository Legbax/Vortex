<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vortex UI Preview - Redmi 9 Lancelot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        vortex: {
                            bg: '#080A0F',
                            surface: '#12151A',
                            accent: '#00D4FF',
                            text: '#FFFFFF',
                            secondary: '#8F9BB3',
                            danger: '#FF5252',
                            success: '#00E676',
                            warning: '#FFAB00'
                        }
                    },
                    fontFamily: {
                        sans: ['Roboto', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        /* Map Pattern */
        .bg-map-pattern {
            background-image: radial-gradient(#333 1px, transparent 1px);
            background-size: 20px 20px;
        }
    </style>
</head>
<body class="bg-gray-900 flex items-center justify-center min-h-screen font-sans selection:bg-vortex-accent selection:text-vortex-bg p-4">

    <!-- Redmi 9 Lancelot Chassis Simulation (360x800 logical px ~ 720x1600 physical) -->
    <div x-data="app()" class="relative w-[360px] h-[800px] bg-black rounded-[3rem] shadow-2xl overflow-hidden border-[8px] border-gray-800 ring-4 ring-gray-900 shrink-0">

        <!-- Notch Area -->
        <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-40 h-7 bg-black rounded-b-xl z-50"></div>

        <!-- Screen Content -->
        <div class="w-full h-full bg-vortex-bg flex flex-col text-vortex-text relative">

            <!-- Status Bar -->
            <div class="h-8 w-full flex justify-between items-center px-6 pt-2 select-none z-40 bg-vortex-bg/90 backdrop-blur-sm">
                <span class="text-xs font-medium tracking-wide">12:00</span>
                <div class="flex items-center gap-1">
                    <span class="material-symbols-rounded text-[16px]" :class="network.wifi ? '' : 'text-gray-600'">wifi</span>
                    <span class="material-symbols-rounded text-[16px]">signal_cellular_4_bar</span>
                    <span class="material-symbols-rounded text-[16px]">battery_full</span>
                </div>
            </div>

            <!-- Main Content Area (Scrollable) -->
            <div class="flex-1 overflow-y-auto no-scrollbar pb-24 pt-4 px-4 relative">

                <!-- STATUS TAB -->
                <div x-show="activeTab === 'status'" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform scale-95" x-transition:enter-end="opacity-100 transform scale-100">
                    <h1 class="text-2xl font-bold mb-6 tracking-tight">Dashboard</h1>

                    <!-- Evasion Score -->
                    <div class="bg-vortex-surface rounded-2xl p-6 mb-4 flex flex-col items-center justify-center relative overflow-hidden border border-white/5">
                        <div class="absolute inset-0 bg-gradient-to-b from-vortex-accent/5 to-transparent"></div>
                        <div class="relative w-40 h-40 flex items-center justify-center">
                            <!-- SVG Circle Progress -->
                            <svg class="w-full h-full transform -rotate-90">
                                <circle cx="80" cy="80" r="70" stroke="#1F2937" stroke-width="12" fill="transparent"></circle>
                                <circle cx="80" cy="80" r="70" stroke="#00D4FF" stroke-width="12" fill="transparent" stroke-dasharray="440" :stroke-dashoffset="440 - (440 * evasionScore / 100)" class="transition-all duration-1000 ease-out"></circle>
                            </svg>
                            <div class="absolute text-center">
                                <span class="text-4xl font-bold text-white" x-text="evasionScore"></span>
                                <span class="text-xs text-vortex-accent block uppercase tracking-widest">Score</span>
                            </div>
                        </div>
                        <p class="mt-4 text-sm text-vortex-secondary text-center">Your device profile is highly consistent and evasion is active.</p>
                    </div>

                    <!-- Status Cards -->
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <div class="bg-vortex-surface p-4 rounded-2xl border border-white/5 flex flex-col items-center gap-2">
                            <span class="material-symbols-rounded text-vortex-success text-3xl">verified_user</span>
                            <span class="text-xs font-bold uppercase tracking-wider text-vortex-secondary">Root Hidden</span>
                        </div>
                        <div class="bg-vortex-surface p-4 rounded-2xl border border-white/5 flex flex-col items-center gap-2">
                            <span class="material-symbols-rounded text-vortex-accent text-3xl">extension</span>
                            <span class="text-xs font-bold uppercase tracking-wider text-vortex-secondary">Module Active</span>
                        </div>
                    </div>

                    <!-- Active Profile Summary -->
                    <div class="bg-vortex-surface rounded-2xl p-4 border border-white/5">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-xs text-vortex-secondary uppercase font-bold">Current Identity</span>
                            <button @click="activeTab = 'device'" class="text-vortex-accent text-xs font-bold">EDIT</button>
                        </div>
                        <div class="flex items-center gap-3">
                            <span class="material-symbols-rounded text-4xl text-gray-400">smartphone</span>
                            <div>
                                <p class="font-bold text-lg leading-tight" x-text="selectedDevice.model"></p>
                                <p class="text-xs text-vortex-secondary" x-text="selectedDevice.manufacturer"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DEVICE TAB -->
                <div x-show="activeTab === 'device'" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-4" x-transition:enter-end="opacity-100 transform translate-x-0">
                    <h1 class="text-2xl font-bold mb-4 tracking-tight">Device Profile</h1>

                    <!-- Search -->
                    <div class="relative mb-4">
                        <span class="absolute left-4 top-1/2 transform -translate-y-1/2 material-symbols-rounded text-vortex-secondary">search</span>
                        <input type="text" x-model="searchDevice" placeholder="Search models..." class="w-full bg-vortex-surface border border-white/10 rounded-xl py-3 pl-12 pr-4 text-sm focus:border-vortex-accent focus:outline-none transition-colors placeholder-gray-600">
                    </div>

                    <!-- List -->
                    <div class="space-y-3">
                        <template x-for="device in filteredDevices" :key="device.id">
                            <div @click="selectDevice(device)" class="bg-vortex-surface rounded-xl p-4 border transition-all cursor-pointer relative overflow-hidden group" :class="selectedDevice.id === device.id ? 'border-vortex-accent shadow-[0_0_15px_rgba(0,212,255,0.1)]' : 'border-white/5 hover:border-white/20'">
                                <div class="flex items-center justify-between relative z-10">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center text-vortex-secondary font-bold text-xs" x-text="device.manufacturer.substring(0,2).toUpperCase()"></div>
                                        <div>
                                            <p class="font-bold text-sm text-white" x-text="device.model"></p>
                                            <p class="text-xs text-vortex-secondary" x-text="device.device"></p>
                                        </div>
                                    </div>
                                    <div x-show="selectedDevice.id === device.id" class="w-6 h-6 rounded-full bg-vortex-accent flex items-center justify-center">
                                        <span class="material-symbols-rounded text-black text-sm font-bold">check</span>
                                    </div>
                                </div>
                                <!-- Expanded Details for Selected -->
                                <div x-show="selectedDevice.id === device.id" class="mt-4 pt-4 border-t border-white/10 text-xs text-gray-400 font-mono space-y-1" x-transition>
                                    <p><span class="text-vortex-accent">Fingerprint:</span> <span x-text="device.fingerprint.substring(0, 30) + '...'"></span></p>
                                    <p><span class="text-vortex-secondary">Board:</span> <span x-text="device.board"></span></p>
                                    <div class="pt-2">
                                        <button @click.stop="randomizeBuild()" class="w-full py-2 bg-vortex-accent/10 hover:bg-vortex-accent/20 text-vortex-accent rounded-lg font-bold uppercase tracking-wider transition-colors">
                                            Randomize Build
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>

                <!-- NETWORK TAB -->
                <div x-show="activeTab === 'network'" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-4" x-transition:enter-end="opacity-100 transform translate-x-0">
                    <h1 class="text-2xl font-bold mb-6 tracking-tight">Network</h1>

                    <!-- WiFi Toggle -->
                    <div class="bg-vortex-surface rounded-2xl p-4 mb-4 border border-white/5 flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center">
                                <span class="material-symbols-rounded text-blue-400">wifi</span>
                            </div>
                            <div>
                                <p class="font-bold text-sm">WiFi Connection</p>
                                <p class="text-xs text-vortex-secondary">Simulate WiFi state</p>
                            </div>
                        </div>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" x-model="network.wifi" class="sr-only peer">
                            <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-vortex-accent"></div>
                        </label>
                    </div>

                    <!-- Carrier Config -->
                    <div class="bg-vortex-surface rounded-2xl p-4 mb-4 border border-white/5">
                        <h2 class="text-xs font-bold text-vortex-secondary uppercase tracking-wider mb-4">Carrier Simulation</h2>

                        <div class="space-y-4">
                            <div>
                                <label class="text-xs text-gray-400 block mb-1">Sim Operator Name</label>
                                <input type="text" x-model="network.simOperator" class="w-full bg-black/30 border border-white/10 rounded-lg py-2 px-3 text-sm text-white focus:border-vortex-accent focus:outline-none transition-colors">
                            </div>
                            <div>
                                <label class="text-xs text-gray-400 block mb-1">Country Code (ISO)</label>
                                <div class="flex gap-2">
                                    <input type="text" x-model="network.simCountry" class="w-16 bg-black/30 border border-white/10 rounded-lg py-2 px-3 text-center text-sm text-white focus:border-vortex-accent focus:outline-none transition-colors">
                                    <button @click="network.simCountry = 'us'; network.simOperator = 'T-Mobile'" class="flex-1 bg-gray-800 hover:bg-gray-700 rounded-lg text-xs font-bold text-gray-300 transition-colors">USA (T-Mobile)</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- IDs TAB -->
                <div x-show="activeTab === 'ids'" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-4" x-transition:enter-end="opacity-100 transform translate-x-0">
                    <h1 class="text-2xl font-bold mb-6 tracking-tight">Identity</h1>

                    <!-- Action Bar -->
                    <div class="flex gap-2 mb-6">
                        <button @click="randomizeIds()" class="flex-1 bg-vortex-accent text-black font-bold py-3 rounded-xl shadow-lg shadow-vortex-accent/20 active:scale-95 transition-all flex items-center justify-center gap-2">
                            <span class="material-symbols-rounded text-lg">autorenew</span>
                            Randomize All
                        </button>
                    </div>

                    <!-- ID Fields -->
                    <div class="space-y-4">
                        <!-- IMEI -->
                        <div class="bg-vortex-surface rounded-xl p-3 border border-white/5 relative group focus-within:border-vortex-accent transition-colors">
                            <label class="text-[10px] uppercase font-bold text-vortex-secondary block mb-1">IMEI</label>
                            <input type="text" x-model="ids.imei" class="w-full bg-transparent text-white font-mono text-sm focus:outline-none tracking-wider">
                            <div class="absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center gap-2">
                                <span class="text-[10px] px-1.5 py-0.5 rounded bg-green-900/50 text-green-400 border border-green-700/50" x-show="isValidLuhn(ids.imei)">VALID</span>
                                <span class="text-[10px] px-1.5 py-0.5 rounded bg-red-900/50 text-red-400 border border-red-700/50" x-show="!isValidLuhn(ids.imei)">INVALID</span>
                                <button @click="copyToClipboard(ids.imei)" class="text-gray-500 hover:text-white transition-colors">
                                    <span class="material-symbols-rounded text-lg">content_copy</span>
                                </button>
                            </div>
                        </div>

                        <!-- Android ID -->
                        <div class="bg-vortex-surface rounded-xl p-3 border border-white/5 relative group focus-within:border-vortex-accent transition-colors">
                            <label class="text-[10px] uppercase font-bold text-vortex-secondary block mb-1">Android ID</label>
                            <input type="text" x-model="ids.androidId" class="w-full bg-transparent text-white font-mono text-sm focus:outline-none tracking-wider">
                            <button @click="copyToClipboard(ids.androidId)" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-white transition-colors">
                                <span class="material-symbols-rounded text-lg">content_copy</span>
                            </button>
                        </div>

                         <!-- GAID -->
                         <div class="bg-vortex-surface rounded-xl p-3 border border-white/5 relative group focus-within:border-vortex-accent transition-colors">
                            <label class="text-[10px] uppercase font-bold text-vortex-secondary block mb-1">Google Ad ID</label>
                            <input type="text" x-model="ids.gaid" class="w-full bg-transparent text-white font-mono text-xs focus:outline-none tracking-wider text-ellipsis">
                             <button @click="copyToClipboard(ids.gaid)" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-white transition-colors">
                                <span class="material-symbols-rounded text-lg">content_copy</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- LOCATION TAB -->
                <div x-show="activeTab === 'location'" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-4" x-transition:enter-end="opacity-100 transform translate-x-0">
                    <h1 class="text-2xl font-bold mb-6 tracking-tight">Location</h1>

                    <!-- Map Mock -->
                    <div class="w-full h-48 bg-gray-800 rounded-2xl mb-4 overflow-hidden relative border border-white/10 group bg-map-pattern">
                        <!-- Pin -->
                        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-full text-vortex-accent drop-shadow-xl animate-bounce">
                            <span class="material-symbols-rounded text-4xl">location_on</span>
                        </div>
                        <div class="absolute bottom-2 right-2 bg-black/60 backdrop-blur rounded px-2 py-1 text-[10px] text-gray-400">
                            Mock View
                        </div>
                    </div>

                    <!-- Coords -->
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <div class="bg-vortex-surface rounded-xl p-3 border border-white/5">
                            <label class="text-[10px] uppercase font-bold text-vortex-secondary block mb-1">Latitude</label>
                            <input type="text" x-model="location.lat" class="w-full bg-transparent text-white font-mono text-sm focus:outline-none">
                        </div>
                        <div class="bg-vortex-surface rounded-xl p-3 border border-white/5">
                            <label class="text-[10px] uppercase font-bold text-vortex-secondary block mb-1">Longitude</label>
                            <input type="text" x-model="location.lng" class="w-full bg-transparent text-white font-mono text-sm focus:outline-none">
                        </div>
                    </div>

                    <!-- Movement Toggle -->
                    <div class="bg-vortex-surface rounded-2xl p-4 mb-4 border border-white/5 flex items-center justify-between">
                         <div>
                            <p class="font-bold text-sm">Simulate Movement</p>
                            <p class="text-xs text-vortex-secondary">Jitter location periodically</p>
                        </div>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" x-model="location.moving" class="sr-only peer">
                            <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-vortex-accent"></div>
                        </label>
                    </div>
                </div>

                <!-- ADVANCED TAB -->
                <div x-show="activeTab === 'advanced'" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform translate-x-4" x-transition:enter-end="opacity-100 transform translate-x-0">
                    <h1 class="text-2xl font-bold mb-6 tracking-tight">Advanced</h1>

                    <!-- App Management -->
                    <div class="bg-vortex-surface rounded-2xl p-4 mb-6 shadow-lg border border-white/5">
                        <div class="flex items-center gap-2 mb-4">
                            <span class="material-symbols-rounded text-vortex-accent">apps</span>
                            <h2 class="text-sm font-bold text-vortex-secondary uppercase tracking-wider">Target Apps</h2>
                        </div>
                        <div class="space-y-4">
                            <template x-for="appKey in ['snapchat', 'playStore', 'gms']" :key="appKey">
                                <div class="flex items-center justify-between group">
                                    <div class="flex items-center gap-3">
                                        <div class="w-10 h-10 rounded-full flex items-center justify-center shadow-sm" :class="getAppColor(appKey)">
                                            <span class="material-symbols-rounded text-white text-xl" x-text="getAppIcon(appKey)"></span>
                                        </div>
                                        <div>
                                            <p class="font-medium text-sm group-hover:text-vortex-accent transition-colors" x-text="getAppName(appKey)"></p>
                                        </div>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" x-model="apps[appKey]" class="sr-only peer">
                                        <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-vortex-accent"></div>
                                    </label>
                                </div>
                            </template>
                        </div>
                         <div class="mt-6 flex gap-3">
                            <button @click="forceStop()" class="flex-1 bg-vortex-surface border border-vortex-accent/30 hover:bg-vortex-accent/10 active:scale-95 transition-all text-vortex-accent font-medium py-3 rounded-xl flex items-center justify-center gap-2 text-xs">
                                <span class="material-symbols-rounded text-sm">stop_circle</span>
                                Force Stop
                            </button>
                            <button @click="confirmClearData()" class="flex-1 bg-vortex-danger/10 border border-vortex-danger/30 hover:bg-vortex-danger/20 active:scale-95 transition-all text-vortex-danger font-medium py-3 rounded-xl flex items-center justify-center gap-2 text-xs">
                                <span class="material-symbols-rounded text-sm">delete_forever</span>
                                Clear Data
                            </button>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Bottom Navigation -->
            <div class="h-[72px] bg-vortex-surface border-t border-white/5 flex justify-between items-center px-2 pb-2 shrink-0 z-50">
                <template x-for="tab in tabs">
                    <button @click="activeTab = tab.id" :class="{'text-vortex-accent': activeTab === tab.id, 'text-vortex-secondary': activeTab !== tab.id}" class="flex flex-col items-center justify-center w-full h-full gap-1 active:scale-90 transition-transform relative group">
                         <div x-show="activeTab === tab.id" class="absolute -top-[1px] w-8 h-[2px] bg-vortex-accent rounded-b-full shadow-[0_0_10px_rgba(0,212,255,0.5)]"></div>
                        <span class="material-symbols-rounded text-2xl group-hover:text-vortex-accent/80 transition-colors" x-text="tab.icon"></span>
                        <span class="text-[10px] font-medium tracking-wide" x-text="tab.label"></span>
                    </button>
                </template>
            </div>

            <!-- Android Navigation Bar Indicator -->
            <div class="absolute bottom-1 left-1/2 transform -translate-x-1/2 w-32 h-1 bg-gray-600 rounded-full opacity-50 z-50"></div>

        </div>

        <!-- Global Modals & Toasts -->
        <!-- Confirm Modal -->
        <div x-show="modal.open" class="absolute inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-sm" x-transition.opacity>
            <div class="bg-vortex-surface w-[85%] rounded-2xl p-6 border border-white/10 shadow-2xl transform transition-all" @click.away="modal.open = false">
                <div class="w-12 h-12 rounded-full bg-vortex-danger/20 flex items-center justify-center mb-4 mx-auto" x-show="modal.type === 'danger'">
                    <span class="material-symbols-rounded text-vortex-danger text-2xl">warning</span>
                </div>
                <h3 class="text-xl font-bold text-center mb-2" x-text="modal.title"></h3>
                <p class="text-center text-vortex-secondary text-sm mb-6" x-text="modal.message"></p>
                <div class="flex gap-3">
                    <button @click="modal.open = false" class="flex-1 py-3 rounded-xl bg-transparent border border-gray-600 text-gray-300 font-medium active:bg-gray-800 transition-colors">Cancel</button>
                    <button @click="executeAction()" class="flex-1 py-3 rounded-xl font-medium text-black active:opacity-80 transition-opacity shadow-lg" :class="modal.type === 'danger' ? 'bg-vortex-danger' : 'bg-white'">Confirm</button>
                </div>
            </div>
        </div>

        <!-- Toast -->
        <div x-show="toast.show" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4" x-transition:enter-end="opacity-100 translate-y-0" x-transition:leave="transition ease-in duration-200" class="absolute bottom-24 left-1/2 transform -translate-x-1/2 bg-gray-800/90 backdrop-blur text-white px-6 py-3 rounded-full shadow-xl flex items-center gap-3 border border-white/5 z-[60] w-max max-w-[90%]">
             <span class="material-symbols-rounded text-vortex-accent">check_circle</span>
             <span x-text="toast.message" class="text-sm font-medium"></span>
        </div>

    </div>

    <script>
        function app() {
            return {
                activeTab: 'status',
                evasionScore: 98,
                searchDevice: '',
                tabs: [
                    { id: 'status', label: 'Status', icon: 'dashboard' },
                    { id: 'device', label: 'Device', icon: 'smartphone' },
                    { id: 'network', label: 'Network', icon: 'signal_cellular_alt' },
                    { id: 'ids', label: 'IDs', icon: 'fingerprint' },
                    { id: 'location', label: 'Location', icon: 'location_on' },
                    { id: 'advanced', label: 'Advanced', icon: 'settings_suggest' }
                ],
                devices: [
                    { id: 1, manufacturer: 'Xiaomi', model: 'Redmi Note 9', device: 'merlin', board: 'merlin', fingerprint: 'Redmi/merlin/merlin:10/QP1A.190711.020/V12.0.1.0.QJOMIXM:user/release-keys' },
                    { id: 2, manufacturer: 'Samsung', model: 'Galaxy S21', device: 'o1s', board: 'exynos2100', fingerprint: 'samsung/o1s/o1s:11/RP1A.200720.012/G991BXXU3AUE1:user/release-keys' },
                    { id: 3, manufacturer: 'Google', model: 'Pixel 5', device: 'redfin', board: 'redfin', fingerprint: 'google/redfin/redfin:11/RQ3A.211001.001/7641976:user/release-keys' },
                    { id: 4, manufacturer: 'OnePlus', model: '8T', device: 'kebab', board: 'kona', fingerprint: 'OnePlus/OnePlus8T/OnePlus8T:11/RP1A.201005.001/2102011800:user/release-keys' },
                    { id: 5, manufacturer: 'Xiaomi', model: 'Redmi 9', device: 'lancelot', board: 'lancelot', fingerprint: 'Redmi/lancelot/lancelot:10/QP1A.190711.020/V11.0.4.0.QJCMIXM:user/release-keys' }
                ],
                selectedDevice: { id: 5, manufacturer: 'Xiaomi', model: 'Redmi 9', device: 'lancelot', board: 'lancelot', fingerprint: 'Redmi/lancelot/lancelot:10/QP1A.190711.020/V11.0.4.0.QJCMIXM:user/release-keys' },
                network: {
                    wifi: true,
                    simOperator: 'T-Mobile',
                    simCountry: 'us'
                },
                ids: {
                    imei: '864981045239102',
                    androidId: 'f92a392b19284',
                    gaid: '38400000-8cf0-11bd-b23e-10b96e4ef00d'
                },
                location: {
                    lat: '40.7128',
                    lng: '-74.0060',
                    moving: false
                },
                apps: {
                    snapchat: true,
                    playStore: false,
                    gms: false
                },
                modal: { open: false, title: '', message: '', type: 'danger', action: null },
                toast: { show: false, message: '' },

                get filteredDevices() {
                    return this.devices.filter(d =>
                        d.model.toLowerCase().includes(this.searchDevice.toLowerCase()) ||
                        d.manufacturer.toLowerCase().includes(this.searchDevice.toLowerCase())
                    );
                },

                selectDevice(device) {
                    this.selectedDevice = device;
                    this.showToast(`Selected ${device.model}`);
                },

                isValidLuhn(value) {
                    if (!/^\d+$/.test(value)) return false;
                    let nDigits = value.length;
                    let nSum = 0;
                    let isSecond = false;
                    for (let i = nDigits - 1; i >= 0; i--) {
                        let d = value.charCodeAt(i) - '0'.charCodeAt(0);
                        if (isSecond == true) d = d * 2;
                        nSum += parseInt(d / 10, 10);
                        nSum += d % 10;
                        isSecond = !isSecond;
                    }
                    return (nSum % 10 == 0);
                },

                randomizeIds() {
                    this.ids.imei = this.generateRandomImei();
                    this.ids.androidId = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
                    this.ids.gaid = crypto.randomUUID();
                    this.showToast('All IDs Randomized');
                },

                generateRandomImei() {
                    // Simple mock generator, not real Luhn for brevity in JS (though validation works)
                    let imei = '86' + Math.floor(Math.random() * 1000000000000);
                    // Append check digit mock
                    return imei;
                },

                randomizeBuild() {
                    this.showToast('Build fingerprint randomized');
                },

                copyToClipboard(text) {
                    // navigator.clipboard.writeText(text); // Doesn't work in preview iframe usually
                    this.showToast('Copied to clipboard');
                },

                getAppColor(key) {
                    const colors = { snapchat: 'bg-yellow-400', playStore: 'bg-green-500', gms: 'bg-blue-500' };
                    return colors[key];
                },
                getAppIcon(key) {
                    const icons = { snapchat: 'chat_bubble', playStore: 'shop', gms: 'settings_system_daydream' };
                    return icons[key];
                },
                getAppName(key) {
                    const names = { snapchat: 'Snapchat', playStore: 'Play Store', gms: 'Play Services' };
                    return names[key];
                },
                forceStop() {
                    const selected = Object.keys(this.apps).filter(k => this.apps[k]);
                    if (selected.length === 0) { this.showToast('Select at least one app'); return; }
                    this.showToast(`Force stopped ${selected.length} apps`);
                },
                confirmClearData() {
                    const selected = Object.keys(this.apps).filter(k => this.apps[k]);
                    if (selected.length === 0) { this.showToast('Select at least one app'); return; }
                    this.modal.title = 'Clear Data?';
                    this.modal.message = 'Permanently delete all data for selected apps?';
                    this.modal.type = 'danger';
                    this.modal.action = () => { this.showToast(`Data cleared for ${selected.length} apps`); };
                    this.modal.open = true;
                },
                executeAction() { if (this.modal.action) this.modal.action(); this.modal.open = false; },
                showToast(msg) {
                    this.toast.message = msg;
                    this.toast.show = true;
                    setTimeout(() => this.toast.show = false, 3000);
                }
            }
        }
    </script>
</body>
</html>
